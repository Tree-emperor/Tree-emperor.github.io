[{"content":"先来个友情链接：\n【Hugo】Stack主题自定义修改\n","date":"2025-06-12T00:00:00Z","image":"https://letere-gzj.github.io/hugo-stack/p/hugo/custom-stack-theme/cover_hu9421790518969970727.png","permalink":"https://Tree-emperor.github.io/p/myhugo/","title":"Hugo + Stack网站搭建"},{"content":"SpringAI M8版本 记录了SpringAI学习过程中遇到的一些小问题。\n基本上全程都是跟着黑马的视频学习，只学习了chatAI系列：\n黑马程序员SpringAI\n接下来只记录遇到的问题，因为视频教程是m6的，我这里新建的项目是m8的，有很多函数已经无法使用。\n@RequestMapping\n由于教程中前端是cursor写的，很多地方感觉bug很多，前端会有query形式的POST方法，这就导致以下位置只能用@RequestMapping不能用@GetMapping.（我不理解前端为什么要这么写，没研究前端代码）： 1 2 3 4 5 6 7 8 9 10 11 12 13 //这里只能用RequestMapping，前端会有POST方法来调用，但是利用query形式，我特么也不知道为啥这么写。。。 @RequestMapping(value = \u0026#34;/chat\u0026#34;,produces = \u0026#34;text/html;charset=utf-8\u0026#34;) public Flux\u0026lt;String\u0026gt; chat(String prompt,String chatId){ //1.保存会话id chatHistoryRepository.save(\u0026#34;chat\u0026#34;,chatId); //2.请求模型 return chatClient.prompt() .user(prompt) .advisors(a -\u0026gt; a.param(CHAT_MEMORY_CONVERSATION_ID_KEY,chatId)) .stream() .content(); } base-url\n这个问题很坑，视频中是自己部署的残血ds，而如果用阿里云的ds的api，这里的base-url不要按照阿里云教程来！！！！！要填写：https://dashscope.aliyuncs.com/compatible-mode 1 2 3 4 5 6 7 ai: openai: api-key: 你的api-key，也可以用环境变量形式 base-url: https://dashscope.aliyuncs.com/compatible-mode chat: options: model: deepseek-r1 chatMemory\n最新版本的InMemoryChatMemory()这个函数已经被弃用了！不要使用这个来自定义ChatMemory！！！！ 按照SpringAI官方文档：聊天记忆 (Chat Memory) | Spring AI1.0.0中文文档|Spring官方文档|SpringBoot 教程|Spring中文网 可以这么实现： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 //会话记忆 @Bean public ChatMemory chatMemory(){ return MessageWindowChatMemory.builder().build(); }; @Bean public ChatClient chatClient(OpenAiChatModel openAiChatModel,ChatMemory chatMemory) { String prompt = \u0026#34;你的提示词\u0026#34;; //进行环绕通知：日志 return ChatClient .builder(openAiChatModel) .defaultSystem(prompt) .defaultAdvisors( new SimpleLoggerAdvisor(), new MessageChatMemoryAdvisor(chatMemory) ) .build(); } 悄悄说一句，官方文档改了，最开始官方文档是错的\u0026hellip;.逆天.\n前端install问题\n这里前端如果你用淘宝镜像源，貌似无法下载一个依赖，所以需要切换npm的registry： 1 npm config set registry https://registry.npmjs.org/ ","date":"2025-05-26T00:00:00Z","image":"https://springdoc.cn/spring-ai/_images/spring_ai_logo_with_text.svg","permalink":"https://Tree-emperor.github.io/p/springai/","title":"SpringAI学习"}]